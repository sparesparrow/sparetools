{
  "name": "README",
  "description": "Mermaid flowchart diagram",
  "type": "flowchart",
  "content": "# MCP Mermaid Diagram Server\n\nThis MCP server provides tools for generating, analyzing, and modifying [Mermaid](https://mermaid.js.org/) diagrams using natural language instructions. Mermaid is a markdown-based diagramming and charting tool that renders text definitions into diagrams.\n\n## Features\n\n- **Generate Mermaid diagrams** from natural language descriptions\n- **Analyze existing diagrams** for clarity, structure, and improvement opportunities\n- **Modify diagrams** based on natural language instructions\n- **Apply beautiful styling** with preset themes (default, dark, pastel, vibrant)\n- **Create custom themes** to match your brand or preferences\n- **Generate SVG previews** of diagrams for embedding in documents\n- **Validate diagrams** to ensure they follow proper Mermaid syntax\n- **Advanced orchestration** with code analysis and class diagram generation (with orchestrator version)\n\n## Server Variants\n\nThis package provides two MCP server variants:\n\n1. **Standard Server**: Core Mermaid diagram generation and manipulation functionality\n2. **Orchestrator Server**: Enhanced version that includes code analysis and SOLID principle evaluation\n\n## Installation\n\n### Using pip\n\n```bash\npip install mcp-mermaid-server\n```\n\n### Using uvx\n\n```bash\nuvx mcp-server-mermaid\n```\n\n### From source\n\n```bash\ngit clone https://github.com/sparesparrow/mcp-servers.git\ncd mcp-servers\npip install -e .\n```\n\n## Usage\n\n### Running the server\n\nYou can run the standard server directly:\n\n```bash\npython -m src.mermaid.mermaid_server\n```\n\nOr run the orchestrator version with additional capabilities:\n\n```bash\npython -m src.mermaid.mermaid_orchestrator\n```\n\n### Environment Variables\n\n- `ANTHROPIC_API_KEY`: Your Anthropic API key (required)\n- `CACHE_TTL`: Cache time-to-live in seconds (default: 3600)\n- `CALLS_PER_MINUTE`: Rate limit for API calls (default: 25)\n- `DEFAULT_THEME`: Default color theme (default: \"default\")\n- `CUSTOM_THEMES_PATH`: Path to JSON file containing custom themes (default: \"~/.mermaid_themes.json\")\n- `ORCHESTRATOR_CALLS_PER_MINUTE`: Rate limit for orchestrator API calls (default: 15, orchestrator only)\n- `SERVER_TYPE`: When using Docker, set to \"standard\" or \"orchestrator\" (default: \"standard\")\n\n## Tools\n\n### Standard Server Tools\n\n#### generate_diagram\n\nGenerates a Mermaid diagram from a text description with optional styling.\n\n```json\n{\n  \"tool\": \"generate_diagram\",\n  \"params\": {\n    \"query\": \"Create a flowchart showing user authentication with registration, login, and logout steps\",\n    \"theme\": \"pastel\"\n  }\n}\n```\n\nAvailable themes: `default`, `dark`, `pastel`, `vibrant`, and any custom themes you've created\n\n#### analyze_diagram\n\nAnalyzes a Mermaid diagram and provides insights.\n\n```json\n{\n  \"tool\": \"analyze_diagram\",\n  \"params\": {\n    \"diagram\": \"graph TD\\nA[Start] --> B[Process]\\nB --> C[End]\"\n  }\n}\n```\n\n#### modify_diagram\n\nModifies an existing Mermaid diagram based on instructions.\n\n```json\n{\n  \"tool\": \"modify_diagram\",\n  \"params\": {\n    \"diagram\": \"graph TD\\nA[Start] --> B[Process]\\nB --> C[End]\",\n    \"modification\": \"Add an alternative path from Process to a new node called Alternative\",\n    \"theme\": \"vibrant\",\n    \"keep_styling\": false\n  }\n}\n```\n\nParameters:\n- `diagram`: The original Mermaid diagram code\n- `modification`: Description of changes to make\n- `theme`: Optional color theme to apply\n- `keep_styling`: Whether to preserve existing styling (default: true)\n\n#### preview_diagram\n\nGenerates an SVG preview of a Mermaid diagram.\n\n```json\n{\n  \"tool\": \"preview_diagram\",\n  \"params\": {\n    \"diagram\": \"graph TD\\nA[Start] --> B[Process]\\nB --> C[End]\",\n    \"theme\": \"dark\"\n  }\n}\n```\n\nReturns a base64-encoded SVG string that can be embedded in HTML or Markdown:\n\n```html\n<img src=\"data:image/svg+xml;base64,BASE64_ENCODED_SVG_HERE\" alt=\"Mermaid Diagram\" />\n```\n\n#### validate_diagram\n\nValidates Mermaid diagram syntax.\n\n```json\n{\n  \"tool\": \"validate_diagram\",\n  \"params\": {\n    \"diagram\": \"graph TD\\nA[Start] --> B[Process]\\nB --> C[End]\"\n  }\n}\n```\n\n#### add_custom_theme\n\nAdds a new custom color theme.\n\n```json\n{\n  \"tool\": \"add_custom_theme\",\n  \"params\": {\n    \"name\": \"my-brand-theme\",\n    \"colors\": {\n      \"node_fill\": \"#f5f5f5\",\n      \"node_border\": \"#999999\",\n      \"node_text\": \"#444444\",\n      \"edge\": \"#888888\",\n      \"highlight\": \"#ff9900\",\n      \"success\": \"#99cc99\",\n      \"warning\": \"#ffdd99\",\n      \"error\": \"#ff9999\"\n    }\n  }\n}\n```\n\nRequired color keys:\n- `node_fill`: Background color for nodes\n- `node_border`: Border color for nodes\n- `node_text`: Text color for nodes\n- `edge`: Color for connections between nodes\n- `highlight`: Color for emphasized elements\n- `success`: Color for success states\n- `warning`: Color for warning states\n- `error`: Color for error states\n\nAll colors must be valid hex codes (#RRGGBB or #RGB).\n\n#### remove_custom_theme\n\nRemoves a custom color theme.\n\n```json\n{\n  \"tool\": \"remove_custom_theme\",\n  \"params\": {\n    \"name\": \"my-brand-theme\"\n  }\n}\n```\n\nNote: Built-in themes (default, dark, pastel, vibrant) cannot be removed.\n\n#### get_theme_info\n\nGets information about available color themes.\n\n```json\n{\n  \"tool\": \"get_theme_info\",\n  \"params\": {\n    \"theme_name\": \"dark\"\n  }\n}\n```\n\n#### clear_cache\n\nClears the server's response cache.\n\n```json\n{\n  \"tool\": \"clear_cache\",\n  \"params\": {}\n}\n```\n\n#### get_status\n\nGets the current server status.\n\n```json\n{\n  \"tool\": \"get_status\",\n  \"params\": {}\n}\n```\n\n### Orchestrator Server Tools\n\nIn addition to all standard tools, the orchestrator server provides these additional tools:\n\n#### analyze_and_visualize\n\nAnalyzes code against SOLID principles and generates a diagram from the results.\n\n```json\n{\n  \"tool\": \"analyze_and_visualize\",\n  \"params\": {\n    \"code\": \"class User { ... }\",\n    \"principles\": [\"SingleResponsibility\", \"OpenClosed\"]\n  }\n}\n```\n\nParameters:\n- `code`: Code to analyze\n- `principles`: Optional list of specific principles to check\n\n#### generate_class_diagram\n\nGenerates a class diagram from code.\n\n```json\n{\n  \"tool\": \"generate_class_diagram\",\n  \"params\": {\n    \"code\": \"class User { ... }\"\n  }\n}\n```\n\n#### create_documentation\n\nCreates comprehensive documentation for code with analysis and diagrams.\n\n```json\n{\n  \"tool\": \"create_documentation\",\n  \"params\": {\n    \"code\": \"class User { ... }\"\n  }\n}\n```\n\n## Color Themes\n\nThe Mermaid server supports several built-in color themes and allows you to create custom themes:\n\n### Built-in Themes\n\n- **Default Theme**: A clean, professional theme with light backgrounds and subtle colors.\n- **Dark Theme**: Dark backgrounds with high-contrast text for low-light environments.\n- **Pastel Theme**: Soft, pastel colors for a gentle visual experience.\n- **Vibrant Theme**: Bright, energetic colors for emphasis and visual impact.\n\n### Custom Themes\n\nCustom themes are stored in a JSON file (default location: `~/.mermaid_themes.json`) and can be created or removed using the `add_custom_theme` and `remove_custom_theme` tools. \n\nExample custom theme:\n```json\n{\n  \"my-brand-theme\": {\n    \"node_fill\": \"#f5f5f5\",\n    \"node_border\": \"#999999\",\n    \"node_text\": \"#444444\",\n    \"edge\": \"#888888\",\n    \"highlight\": \"#ff9900\",\n    \"success\": \"#99cc99\",\n    \"warning\": \"#ffdd99\",\n    \"error\": \"#ff9999\"\n  }\n}\n```\n\n## Integration with Claude Desktop\n\nTo use the standard server with Claude Desktop, add the following to your `.claude-config.json` file:\n\n```json\n{\n  \"mcpServers\": {\n    \"mermaid-generator\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"src.mermaid.mermaid_server\"],\n      \"env\": {\n        \"ANTHROPIC_API_KEY\": \"${ANTHROPIC_API_KEY}\",\n        \"DEFAULT_THEME\": \"pastel\",\n        \"CUSTOM_THEMES_PATH\": \"${HOME}/.mermaid_themes.json\"\n      }\n    }\n  }\n}\n```\n\nTo use the orchestrator server instead:\n\n```json\n{\n  \"mcpServers\": {\n    \"mermaid-orchestrator\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"src.mermaid.mermaid_orchestrator\"],\n      \"env\": {\n        \"ANTHROPIC_API_KEY\": \"${ANTHROPIC_API_KEY}\",\n        \"DEFAULT_THEME\": \"pastel\",\n        \"CUSTOM_THEMES_PATH\": \"${HOME}/.mermaid_themes.json\"\n      }\n    }\n  }\n}\n```\n\nAlternatively, using Docker:\n\n```json\n{\n  \"mcpServers\": {\n    \"mermaid-generator\": {\n      \"command\": \"docker\",\n      \"args\": [\"run\", \"-i\", \"--rm\", \"-e\", \"SERVER_TYPE=standard\", \"mcp-mermaid-server\"],\n      \"env\": {\n        \"ANTHROPIC_API_KEY\": \"${ANTHROPIC_API_KEY}\",\n        \"DEFAULT_THEME\": \"pastel\"\n      },\n      \"volumes\": [\n        \"${HOME}/.mermaid_themes.json:/root/.mermaid_themes.json\"\n      ]\n    }\n  }\n}\n```\n\n## Example Conversations\n\n### Generating a Diagram\n\n**User**: \"Create a sequence diagram showing how a user interacts with a login system\"\n\n**Claude**: \"I'll create a sequence diagram for a login system with a dark theme. Let me use the Mermaid diagram generator.\"\n\n*Claude uses the generate_diagram tool with the 'dark' theme*\n\n**Claude**: \"Here's a sequence diagram showing a user's interaction with a login system:\n\n```mermaid\n%%{init: {\n    'theme': 'base',\n    'themeVariables': {\n        'primaryColor': '#ff9933',\n        'primaryTextColor': '#fff',\n        'primaryBorderColor': '#aaaaaa',\n        'lineColor': '#888888',\n        'secondaryColor': '#2d2d2d',\n        'tertiaryColor': '#2d2d2d'\n    }\n} }%%\nsequenceDiagram\n    actor User\n    participant UI as Login UI\n    participant Auth as Authentication Service\n    participant DB as User Database\n    \n    User->>UI: Enter credentials\n    UI->>Auth: Submit credentials\n    Auth->>DB: Validate credentials\n    DB-->>Auth: Return validation result\n    \n    alt Valid credentials\n        Auth-->>UI: Authentication successful\n        UI-->>User: Show dashboard\n    else Invalid credentials\n        Auth-->>UI: Authentication failed\n        UI-->>User: Show error message\n    end\n```\n\nThis diagram shows:\n1. The user entering credentials in the UI\n2. The UI submitting those credentials to the authentication service\n3. The authentication service validating against the user database\n4. Different paths for successful vs. failed authentication\"\n\n### Creating a Custom Theme\n\n**User**: \"I want to create a custom theme for my brand with blue as the primary color\"\n\n**Claude**: \"I'll help you create a custom theme for your brand. Let me use the Mermaid tools to do that.\"\n\n*Claude uses the add_custom_theme tool*\n\n**Claude**: \"I've created a custom theme called 'brand-blue' with your brand's color scheme. You can now use this theme when generating diagrams by specifying `theme: 'brand-blue'`. Here's a preview of what a diagram would look like with your new theme:\n\n<img src='data:image/svg+xml;base64,...\" alt=\"Brand-themed diagram\" />\n\nYou can use this theme for all your future diagrams, and it will be saved for future sessions as well.\"\n\n### Analyzing Code with the Orchestrator (Orchestrator Only)\n\n**User**: \"Can you generate a class diagram for this code?\"\n\n```python\nclass User:\n    def __init__(self, name, email):\n        self.name = name\n        self.email = email\n        \n    def get_profile(self):\n        return f\"{self.name} <{self.email}>\"\n\nclass Admin(User):\n    def __init__(self, name, email, role):\n        super().__init__(name, email)\n        self.role = role\n        \n    def get_permissions(self):\n        return [\"read\", \"write\", \"admin\"]\n```\n\n**Claude**: \"I'll generate a class diagram for your code.\"\n\n*Claude uses the generate_class_diagram tool*\n\n**Claude**: \"Here's a class diagram representing your code:\n\n```mermaid\nclassDiagram\n    User <|-- Admin\n    \n    class User {\n        +name: str\n        +email: str\n        +__init__(name, email)\n        +get_profile(): str\n    }\n    \n    class Admin {\n        +role: str\n        +__init__(name, email, role)\n        +get_permissions(): list\n    }\n```\n\nThis diagram shows the inheritance relationship between the User and Admin classes, along with their respective attributes and methods.\"\n\n## Testing\n\nRun the tests with pytest:\n\n```bash\npytest tests/test_mermaid_server.py\n```\n\nOr run end-to-end tests:\n\n```bash\n# Test standard server\npython -m src.mermaid.e2e_test --server-type standard\n\n# Test orchestrator server\npython -m src.mermaid.e2e_test --server-type orchestrator\n```\n\n## Docker\n\nBuild and run the Docker container:\n\n```bash\ndocker build -t mcp-mermaid-server -f Dockerfile.mermaid .\n\n# Run standard server\ndocker run -i --rm \\\n  -e ANTHROPIC_API_KEY=your_api_key \\\n  -e DEFAULT_THEME=vibrant \\\n  -e SERVER_TYPE=standard \\\n  -v ~/.mermaid_themes.json:/root/.mermaid_themes.json \\\n  mcp-mermaid-server\n\n# Run orchestrator server\ndocker run -i --rm \\\n  -e ANTHROPIC_API_KEY=your_api_key \\\n  -e DEFAULT_THEME=vibrant \\\n  -e SERVER_TYPE=orchestrator \\\n  -v ~/.mermaid_themes.json:/root/.mermaid_themes.json \\\n  mcp-mermaid-server\n```\n\n## License\n\nMIT ",
  "variables": {},
  "metadata": {
    "imported": true
  }
}